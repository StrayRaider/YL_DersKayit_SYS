import gi

gi.require_version("Gtk", "3.0")
from gi.repository import Gtk




class RootWin(Gtk.VBox):
    def __init__(self,parent):
        Gtk.VBox.__init__(self)
        self.parent = parent
        self.label = Gtk.Label("Student Win")
        self.pack_start(self.label,0,0,5)
        
        self.newUserB = Gtk.Button()
        self.newUserB.set_label("New User")
        self.newUserB.connect("clicked",self.newUserC)
        
        self.pack_start(self.newUserB,0,0,5)


    def newUserC(self,widget):
        self.dialog = NewUserDialog(self)
        response = self.dialog.run()
        if response == Gtk.ResponseType.OK:
            print("The OK button was clicked")
            self.dialog.destroy()
    



class NewUserDialog(Gtk.Dialog):
    def __init__(self, parent):
        super().__init__(title="My Lessons")
        self.add_buttons(
            Gtk.STOCK_CANCEL, Gtk.ResponseType.CANCEL, Gtk.STOCK_OK, Gtk.ResponseType.OK
        )
        self.parent = parent
        self.set_default_size(650, 600)

        self.idEntery = Gtk.Entry()
        self.idEntery.set_placeholder_text(" ID ")
        self.pack_start(self.idEntery,0,0,5)

        self.pwdEntery = Gtk.Entry()
        self.pwdEntery.set_placeholder_text(" Password ")
        self.pack_start(self.pwdEntery,0,0,5)

        self.logInB = Gtk.Button()
        self.logInB.set_label("LogIn")
        self.logInB.connect("clicked",self.logInC)
        self.pack_start(self.logInB,0,0,5)

    def CreateC(self,widget):
        userId = self.idEntery.get_text()
        userPwd = self.pwdEntery.get_text()
        userRole = self.parent.way.split("_")[0]
        print(userRole)
        #activeNo = sqlLib.LogIn(userId, userPwd, userRole)
        print(activeNo)
        if activeNo and activeNo != False:
            print("loginnig")
            self.parent.ActiveNo = activeNo[0]
            print("NO",activeNo)
            self.parent.stack.set_visible_child_name(self.parent.way)
        else:
            print("error wrong Ä±d or password")
